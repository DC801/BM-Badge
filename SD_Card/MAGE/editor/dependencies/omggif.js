!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).omggif=r()}}((function(){return function r(e,t,n){function o(a,f){if(!t[a]){if(!e[a]){var l="function"==typeof require&&require;if(!f&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=t[a]={exports:{}};e[a][0].call(d.exports,(function(r){return o(e[a][1][r]||r)}),d,d.exports,r,e,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(r,e,t){"use strict";function n(r,e,t,n){for(var o=r[e++],i=1<<o,a=i+1,f=a+1,l=o+1,u=(1<<l)-1,d=0,s=0,h=0,c=r[e++],v=new Int32Array(4096),w=null;;){for(;d<16&&0!==c;)s|=r[e++]<<d,d+=8,1===c?c=r[e++]:--c;if(d<l)break;var p=s&u;if(s>>=l,d-=l,p!==i){if(p===a)break;for(var g=p<f?p:w,x=0,b=g;b>i;)b=v[b]>>8,++x;var y=b;if(h+x+(g!==p?1:0)>n)return void console.log("Warning, gif stream longer than expected.");t[h++]=y;var k=h+=x;for(g!==p&&(t[h++]=y),b=g;x--;)b=v[b],t[--k]=255&b,b>>=8;null!==w&&f<4096&&(v[f++]=w<<8|y,f>=u+1&&l<12&&(++l,u=u<<1|1)),w=p}else f=a+1,u=(1<<(l=o+1))-1,w=null}return h!==n&&console.log("Warning, gif stream shorter than expected."),t}try{t.GifWriter=function(r,e,t,n){var o=0,i=void 0===(n=void 0===n?{}:n).loop?null:n.loop,a=void 0===n.palette?null:n.palette;if(e<=0||t<=0||e>65535||t>65535)throw new Error("Width/Height invalid.");function f(r){var e=r.length;if(e<2||e>256||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}r[o++]=71,r[o++]=73,r[o++]=70,r[o++]=56,r[o++]=57,r[o++]=97;var l=0,u=0;if(null!==a){for(var d=f(a);d>>=1;)++l;if(d=1<<l,--l,void 0!==n.background){if((u=n.background)>=d)throw new Error("Background index out of range.");if(0===u)throw new Error("Background index explicitly passed as 0.")}}if(r[o++]=255&e,r[o++]=e>>8&255,r[o++]=255&t,r[o++]=t>>8&255,r[o++]=(null!==a?128:0)|l,r[o++]=u,r[o++]=0,null!==a)for(var s=0,h=a.length;s<h;++s){var c=a[s];r[o++]=c>>16&255,r[o++]=c>>8&255,r[o++]=255&c}if(null!==i){if(i<0||i>65535)throw new Error("Loop count invalid.");r[o++]=33,r[o++]=255,r[o++]=11,r[o++]=78,r[o++]=69,r[o++]=84,r[o++]=83,r[o++]=67,r[o++]=65,r[o++]=80,r[o++]=69,r[o++]=50,r[o++]=46,r[o++]=48,r[o++]=3,r[o++]=1,r[o++]=255&i,r[o++]=i>>8&255,r[o++]=0}var v=!1;this.addFrame=function(e,t,n,i,l,u){if(!0===v&&(--o,v=!1),u=void 0===u?{}:u,e<0||t<0||e>65535||t>65535)throw new Error("x/y invalid.");if(n<=0||i<=0||n>65535||i>65535)throw new Error("Width/Height invalid.");if(l.length<n*i)throw new Error("Not enough pixels for the frame size.");var d=!0,s=u.palette;if(null==s&&(d=!1,s=a),null==s)throw new Error("Must supply either a local or global palette.");for(var h=f(s),c=0;h>>=1;)++c;h=1<<c;var w=void 0===u.delay?0:u.delay,p=void 0===u.disposal?0:u.disposal;if(p<0||p>3)throw new Error("Disposal out of range.");var g=!1,x=0;if(void 0!==u.transparent&&null!==u.transparent&&(g=!0,(x=u.transparent)<0||x>=h))throw new Error("Transparent color index.");if((0!==p||g||0!==w)&&(r[o++]=33,r[o++]=249,r[o++]=4,r[o++]=p<<2|(!0===g?1:0),r[o++]=255&w,r[o++]=w>>8&255,r[o++]=x,r[o++]=0),r[o++]=44,r[o++]=255&e,r[o++]=e>>8&255,r[o++]=255&t,r[o++]=t>>8&255,r[o++]=255&n,r[o++]=n>>8&255,r[o++]=255&i,r[o++]=i>>8&255,r[o++]=!0===d?128|c-1:0,!0===d)for(var b=0,y=s.length;b<y;++b){var k=s[b];r[o++]=k>>16&255,r[o++]=k>>8&255,r[o++]=255&k}return o=function(r,e,t,n){r[e++]=t;var o=e++,i=1<<t,a=i-1,f=i+1,l=f+1,u=t+1,d=0,s=0;function h(t){for(;d>=t;)r[e++]=255&s,s>>=8,d-=8,e===o+256&&(r[o]=255,o=e++)}function c(r){s|=r<<d,d+=u,h(8)}var v=n[0]&a,w={};c(i);for(var p=1,g=n.length;p<g;++p){var x=n[p]&a,b=v<<8|x,y=w[b];if(void 0===y){for(s|=v<<d,d+=u;d>=8;)r[e++]=255&s,s>>=8,d-=8,e===o+256&&(r[o]=255,o=e++);4096===l?(c(i),l=f+1,u=t+1,w={}):(l>=1<<u&&++u,w[b]=l++),v=x}else v=y}c(v),c(f),h(1),o+1===e?r[o]=0:(r[o]=e-o-1,r[e++]=0);return e}(r,o,c<2?2:c,l)},this.end=function(){return!1===v&&(r[o++]=59,v=!0),o},this.getOutputBuffer=function(){return r},this.setOutputBuffer=function(e){r=e},this.getOutputBufferPosition=function(){return o},this.setOutputBufferPosition=function(r){o=r}},t.GifReader=function(r){var e=0;if(71!==r[e++]||73!==r[e++]||70!==r[e++]||56!==r[e++]||56!=(r[e++]+1&253)||97!==r[e++])throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,o=r[e++]|r[e++]<<8,i=r[e++],a=i>>7,f=1<<(7&i)+1;r[e++],r[e++];var l=null,u=null;a&&(l=e,u=f,e+=3*f);var d=!0,s=[],h=0,c=null,v=0,w=null;for(this.width=t,this.height=o;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(11!==r[e]||78==r[e+1]&&69==r[e+2]&&84==r[e+3]&&83==r[e+4]&&67==r[e+5]&&65==r[e+6]&&80==r[e+7]&&69==r[e+8]&&50==r[e+9]&&46==r[e+10]&&48==r[e+11]&&3==r[e+12]&&1==r[e+13]&&0==r[e+16])e+=14,w=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((F=r[e++])>=0))throw Error("Invalid block size");if(0===F)break;e+=F}break;case 249:if(4!==r[e++]||0!==r[e+4])throw new Error("Invalid graphics extension block.");var p=r[e++];h=r[e++]|r[e++]<<8,c=r[e++],0==(1&p)&&(c=null),v=p>>2&7,e++;break;case 254:for(;;){if(!((F=r[e++])>=0))throw Error("Invalid block size");if(0===F)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var g=r[e++]|r[e++]<<8,x=r[e++]|r[e++]<<8,b=r[e++]|r[e++]<<8,y=r[e++]|r[e++]<<8,k=r[e++],E=k>>6&1,m=1<<(7&k)+1,_=l,I=u,B=!1;if(k>>7){B=!0;_=e,I=m,e+=3*m}var A=e;for(e++;;){var F;if(!((F=r[e++])>=0))throw Error("Invalid block size");if(0===F)break;e+=F}s.push({x:g,y:x,width:b,height:y,has_local_palette:B,palette_offset:_,palette_size:I,data_offset:A,data_length:e-A,transparent_index:c,interlaced:!!E,delay:h,disposal:v});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return s.length},this.loopCount=function(){return w},this.frameInfo=function(r){if(r<0||r>=s.length)throw new Error("Frame index out of range.");return s[r]},this.decodeAndBlitFrameBGRA=function(e,o){var i=this.frameInfo(e),a=i.width*i.height,f=new Uint8Array(a);n(r,i.data_offset,f,a);var l=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var d=i.width,s=t-d,h=d,c=4*(i.y*t+i.x),v=4*((i.y+i.height)*t+i.x),w=c,p=4*s;!0===i.interlaced&&(p+=4*t*7);for(var g=8,x=0,b=f.length;x<b;++x){var y=f[x];if(0===h&&(h=d,(w+=p)>=v&&(p=4*s+4*t*(g-1),w=c+(d+s)*(g<<1),g>>=1)),y===u)w+=4;else{var k=r[l+3*y],E=r[l+3*y+1],m=r[l+3*y+2];o[w++]=m,o[w++]=E,o[w++]=k,o[w++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,o){var i=this.frameInfo(e),a=i.width*i.height,f=new Uint8Array(a);n(r,i.data_offset,f,a);var l=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var d=i.width,s=t-d,h=d,c=4*(i.y*t+i.x),v=4*((i.y+i.height)*t+i.x),w=c,p=4*s;!0===i.interlaced&&(p+=4*t*7);for(var g=8,x=0,b=f.length;x<b;++x){var y=f[x];if(0===h&&(h=d,(w+=p)>=v&&(p=4*s+4*t*(g-1),w=c+(d+s)*(g<<1),g>>=1)),y===u)w+=4;else{var k=r[l+3*y],E=r[l+3*y+1],m=r[l+3*y+2];o[w++]=k,o[w++]=E,o[w++]=m,o[w++]=255}--h}}}}catch(r){}},{}]},{},[1])(1)}));