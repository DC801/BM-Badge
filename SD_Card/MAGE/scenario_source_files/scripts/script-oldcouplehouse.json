{
	"on_tick-oldcouplehouse": [
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-oldcouplehouse",
			"success_script": "leave-oldcouplehouse",
			"expected_bool": true
		}
	],
	"on_load-oldcouplehouse": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-sequel-branch",
			"expected_bool": true,
			"success_script": "make-delmar-man"
		}
	],
	"make-delmar-man": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bea2",
			"expected_bool": true,
			"success_script": "make-delmar-sheep"
		},
		{
			"action": "SET_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "delmar-blab"
		}
	],
	"make-delmar-sheep": [
		{
			"action": "SET_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "sheep"
		}
	],
	"leave-oldcouplehouse": [
		{
			"action": "SET_WARP_STATE",
			"string": "exit_from-oldcouplehouse"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bea1",
			"expected_bool": true,
			"success_script": "leave-happytrue"
		},
		{
			"action": "LOAD_MAP",
			"map": "map-main"
		}
	],
	"leave-happytrue": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-sequel-branch",
			"bool_value": true
		},
		{
			"action": "LOAD_MAP",
			"map": "map-main"
		}
	],
	"show_dialog-bea-glitched": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-glitched"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-delmar-glitched": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-delmar-glitched"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "show_dialog-delmar"
		}
	],
	"show_dialog-delmar": [
		{
			"action": "CHECK_ENTITY_GLITCHED",
			"entity": "%SELF%",
			"success_script": "show_dialog-delmar-glitched",
			"expected_bool": true
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": false,
			"success_script": "show_dialog-dsheep"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-sequel-branch",
			"expected_bool": true,
			"success_script": "show_dialog-delmar-blab"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bea1",
			"expected_bool": true,
			"success_script": "show_dialog-delmar-catchup"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-delmar-huh",
			"doc": "Wha... Huh?"
		}
	],
	"show_dialog-delmar-blab": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-delmar-blab",
			"doc": "Which was the style at the time."
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Delmar",
			"script": "show_dialog-delmar"
		}
	],
	"show_dialog-delmar-catchup": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-delmar-catchup",
			"doc": "Huh? What's goin' on? What'd I miss?"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Delmar",
			"script": "show_dialog-delmar"
		}
	],
	"show_dialog-dsheep": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-dsheep"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Delmar",
			"script": "show_dialog-delmar"
		}
	],
	"show_dialog-bea-start": [
		{
			"action": "CHECK_ENTITY_GLITCHED",
			"entity": "%SELF%",
			"success_script": "show_dialog-bea-glitched",
			"expected_bool": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-sequel-branch",
			"expected_bool": true,
			"success_script": "show_dialog-bea-sequel-branch"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": true,
			"success_script": "show_dialog-bea-happy-branch"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "sheep",
			"expected_bool": false,
			"success_script": "show_dialog-bea-mandud-branch"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "show_dialog-bea-start2"
		}
	],
	"show_dialog-bea-start2": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-backstory",
			"expected_bool": true,
			"success_script": "show_dialog-bea-start-s"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-start1",
			"doc": "Forty years ago, things were"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Beatrice",
			"target_entity": "Delmar"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-start2",
			"doc": "My husband was a real man, not a"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-start3",
			"doc": "That gastly hacker ruffian hacked him on a whim!"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-backstory",
			"bool_value": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea1-hint",
			"bool_value": true
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Beatrice",
			"script": "watch-player"
		}
	],
	"show_dialog-bea-start-s": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-start-s",
			"doc": "Oh Delmar, we'll fix you up real soon!"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea1-hint",
			"bool_value": true
		}
	],
	"show_dialog-bea-mandud-branch": [
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "helga",
			"expected_bool": true,
			"success_script": "show_dialog-bea-start2"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-backstory",
			"expected_bool": true,
			"success_script": "show_dialog-bea-mandud-s"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Beatrice",
			"target_entity": "Delmar"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-mandud1",
			"doc": "Oh, Delmar! You're... oh...."
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-mandud2",
			"doc": "Oh, goodness. Well, at least he's not a sheep."
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-start3",
			"doc": "That gastly hacker ruffian hacked him on a whim!"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-backstory",
			"bool_value": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea1-hint",
			"bool_value": true
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Beatrice",
			"script": "watch-player"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-mandud-s": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-mandud-s",
			"doc": "Oh, Delmar! We'll make you your normal self soon!"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-happy-branch": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bea1",
			"expected_bool": true,
			"success_script": "show_dialog-bea-happy-aftermath-branch"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Beatrice",
			"script": "null_script"
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Beatrice",
			"target_entity": "Delmar"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-happy",
			"doc": "Oh, Delmar, it's you!"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "storyflag-bea1",
			"bool_value": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-happy-aftermath-branch": [
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": true,
			"success_script": "show_dialog-bea-end-s"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "sheep",
			"expected_bool": true,
			"success_script": "show_dialog-bea-trick"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "helga",
			"expected_bool": true,
			"success_script": "show_dialog-bea-trick"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "show_dialog-bea-confused"
		}
	],
	"show_dialog-bea-trick": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-confused",
			"doc": "Oh, Delmar, you're... uh...."
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-confused": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-confused",
			"doc": "Oh, Delmar, you're... uh...."
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-end-s": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-end-s",
			"doc": "Thank you, Player!"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-sequel-branch": [
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "sheep",
			"expected_bool": true,
			"success_script": "show_dialog-bea-sheepening-branch"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "helga",
			"expected_bool": true,
			"success_script": "show_dialog-bea-sheepening-branch"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": false,
			"success_script": "show_dialog-bea-confused"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-regret-backstory",
			"expected_bool": true,
			"success_script": "show_dialog-bea-regret-s"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-regret1",
			"doc": "You know, I appreciate what you did, Player"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Beatrice",
			"target_entity": "Delmar"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-regret2",
			"doc": "...."
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 200
		},
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 800
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-regret3",
			"doc": "But now I find myself longing for quiet."
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-regret-backstory",
			"bool_value": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea2-hint",
			"bool_value": true
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-regret-s": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-regret-s",
			"doc": "I'm sure he won't mind being a sheep again."
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea2-hint",
			"bool_value": true
		}
	],
	"show_dialog-bea-sheepening-branch": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bea2",
			"expected_bool": true,
			"success_script": "show_dialog-bea-alldone"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "bea-regret-backstory",
			"expected_bool": false,
			"success_script": "show_dialog-bea-coincidence"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-relief",
			"doc": "Thank you! And we need not mention this to anyone"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "storyflag-bea2",
			"bool_value": true
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-regret-backstory",
			"bool_value": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-relief-s": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-relief-s",
			"doc": "Peace at last!"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-alldone": [
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "sheep",
			"expected_bool": true,
			"success_script": "show_dialog-bea-relief-s"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "helga",
			"expected_bool": true,
			"success_script": "show_dialog-bea-relief-s"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": true,
			"success_script": "show_dialog-bea-deja"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "show_dialog-bea-coincidence"
		}
	],
	"show_dialog-bea-deja": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-deja",
			"doc": "I suddenly have the strangest feeling of"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"show_dialog-bea-coincidence": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-bea-coincidence",
			"doc": "Oh, and I was just thinking how I wanted him to become a sheep"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "storyflag-bea2",
			"bool_value": true
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-regret-backstory",
			"bool_value": true
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Beatrice",
			"script": "show_dialog-bea-start"
		}
	],
	"debug-bea-sequel-q": [
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-debug-bea-sequel-q"
		}
	],
	"delmar-blab": [
		{
			"action": "SET_ENTITY_CURRENT_ANIMATION",
			"entity": "Delmar",
			"byte_value": 3
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Delmar",
			"script": "on_tick-delmar-blab-nonman-watch"
		}
	],
	"on_tick-delmar-blab-nonman-watch": [
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": false,
			"success_script": "delmar-unblab"
		}
	],
	"delmar-unblab": [
		{
			"action": "SET_ENTITY_CURRENT_ANIMATION",
			"entity": "Delmar",
			"byte_value": 0
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Delmar",
			"script": "on_tick-delmar-blab-man-watch"
		}
	],
	"on_tick-delmar-blab-man-watch": [
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man",
			"expected_bool": true,
			"success_script": "delmar-blab"
		}
	],
	"debug-bea-sequel-man": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-sequel-branch",
			"bool_value": true
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "storyflag-bea1",
			"bool_value": true
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-backstory",
			"bool_value": true
		},
		{
			"action": "SET_ENTITY_TYPE",
			"entity": "Delmar",
			"entity_type": "old_man"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "set-hint-flags-false"
		},
		{
			"action": "COPY_SCRIPT",
			"script": "delmar-blab"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-debug-bea-sequel-man"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "debug-bea-sequel-q"
		}
	],
	"debug-bea-sequel-noman": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-sequel-branch",
			"bool_value": true
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "storyflag-bea1",
			"bool_value": true
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "bea-backstory",
			"bool_value": true
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-debug-bea-sequel-noman"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "debug-bea-sequel-q"
		}
	],
	"no_debug-bea-sequel": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-no_debug-bea-sequel",
			"doc": "Nothing changed."
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "debug-bea-sequel-q"
		}
	]
}