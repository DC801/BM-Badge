{	
	"on_load-map-main": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "goodmorning",
			"bool_value": true
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-bobmoss-check"
		}
	],
	"on_load-map-main-bobmoss-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bobmoss",
			"expected_bool": true,
			"success_script": "on_load-map-main-bobmoss-hide"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-rake-check"
		}
	],
	"on_load-map-main-bobmoss-hide": [
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Bob Moss",
			"geometry": "catwalk-hide"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-rake-check"
		}
	],
	"on_load-map-main-rake-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-rake",
			"expected_bool": true,
			"success_script": "on_load-map-main-rake-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_billy-check"
		}
	],
	"on_load-map-main-rake-do": [
		{
			"action": "COPY_SCRIPT",
			"script": "rake-in-lake"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Goose",
			"script": "honk-to-make-rake-float"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_billy-check"
		}
	],
	"rake-in-lake": [
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Rake",
			"geometry": "rake-lake-point"
		}
	],
	"on_load-map-main-glitch_billy-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "billy-unglitched",
			"expected_bool": true,
			"success_script": "on_load-map-main-glitch_billy-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_kid-check"
		}
	],
	"on_load-map-main-glitch_billy-do": [
		{
			"action": "SET_ENTITY_GLITCHED",
			"entity": "Billy",
			"bool_value": false
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_kid-check"
		}
	],
	"on_load-map-main-glitch_kid-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "kid-unglitched",
			"expected_bool": true,
			"success_script": "on_load-map-main-glitch_kid-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_fountain-check"
		}
	],
	"on_load-map-main-glitch_kid-do": [
		{
			"action": "SET_ENTITY_GLITCHED",
			"entity": "Kid",
			"bool_value": false
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_fountain-check"
		}
	],
	"on_load-map-main-glitch_fountain-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "fountain-unglitched",
			"expected_bool": true,
			"success_script": "on_load-map-main-glitch_fountain-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_hamster-check"
		}
	],
	"on_load-map-main-glitch_fountain-do": [
		{
			"action": "SET_ENTITY_GLITCHED",
			"entity": "Fountain",
			"bool_value": false
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-glitch_hamster-check"
		}
	],
	"on_load-map-main-glitch_hamster-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "main_hamster-unglitched",
			"expected_bool": true,
			"success_script": "on_load-map-main-glitch_hamster-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-sheep-check"
		}
	],
	"on_load-map-main-glitch_hamster-do": [
		{
			"action": "SET_ENTITY_GLITCHED",
			"entity": "Hamster",
			"bool_value": false
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-sheep-check"
		}
	],
	"on_load-map-main-sheep-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-shepherd",
			"expected_bool": true,
			"success_script": "on_load-map-main-sheep-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-bender-check"
		}
	],
	"on_load-map-main-sheep-do": [
		{
			"action": "COPY_SCRIPT",
			"script": "sheep-in-pen"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-bender-check"
		}
	],
	"sheep-in-pen": [
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Baa",
			"geometry": "baa_point"
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Ram",
			"geometry": "ram_point"
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Ewe",
			"geometry": "ewe_point"
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Helga",
			"geometry": "helga_point"
		}
	],
	"on_load-map-main-bender-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "storyflag-bender",
			"expected_bool": true,
			"success_script": "on_load-map-main-bender-do"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-warps"
		}
	],
	"on_load-map-main-bender-do": [
		{
			"action": "COPY_SCRIPT",
			"script": "bender-happybutt"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-map-main-warps"
		}
	],
	"bender-happybutt": [
		{
			"action": "SET_ENTITY_TYPE",
			"entity": "Bender",
			"entity_type": "bender"
		}
	],
	"on_load-map-main-warps": [
		{
			"action": "CHECK_WARP_STATE",
			"string": "enter_from-east",
			"success_script": "enter_from-east",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "enter_from-west",
			"success_script": "enter_from-west",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-bobsclub",
			"success_script": "enter_from-bobsclub",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-bakery",
			"success_script": "enter_from-bakery",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-lodge",
			"success_script": "enter_from-lodge",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-lodge-cutscene",
			"success_script": "enter_from-lodge-cutscene",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-greenhouse",
			"success_script": "enter_from-greenhouse",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-magehouse",
			"success_script": "enter_from-magehouse",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-oldcouplehouse",
			"success_script": "enter_from-oldcouplehouse",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-family",
			"success_script": "enter_from-family",
			"expected_bool": true
		},
		{
			"action": "CHECK_WARP_STATE",
			"string": "exit_from-credits",
			"success_script": "enter_from-credits",
			"expected_bool": true
		}
	],
	"show_dialog-cleo1": [
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cleo",
			"target_entity": "Cat"
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cleo",
			"target_entity": "Cat"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-cleo1"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Cleo",
			"script": "show_dialog-cleo2"
		}
	],
	"show_dialog-cleo2": [
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cleo",
			"target_entity": "Cat"
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cleo",
			"target_entity": "Cat"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-cleo2"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Cleo",
			"script": "show_dialog-cleo1"
		}
	],
	"show_dialog-cat": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-cat1"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 300
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cleo",
			"target_entity": "%PLAYER%"
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cat",
			"target_entity": "%PLAYER%"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 300
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-cat2"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cleo",
			"target_entity": "Cat"
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Cat",
			"target_entity": "Cleo"
		}
	],
	"on_tick-main": [
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-bakery-entrance",
			"success_script": "load_map-bakery",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-family-entrance",
			"success_script": "load_map-family",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-greenhouse-entrance",
			"success_script": "load_map-greenhouse",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-magehouse-entrance",
			"success_script": "load_map-magehouse",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-lodge-entrance",
			"success_script": "load_map-lodge",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door-oldcouplehouse-entrance",
			"success_script": "load_map-oldcouplehouse",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door_to-town-east",
			"success_script": "wrap_from-west",
			"expected_bool": true
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"geometry": "door_to-town-west",
			"success_script": "wrap_from-east",
			"expected_bool": true
		}
	],
	"load_map-bakery": [
		{
			"action": "LOAD_MAP",
			"map": "map-bakery"
		}
	],
	"load_map-oldcouplehouse": [
		{
			"action": "LOAD_MAP",
			"map": "map-oldcouplehouse"
		}
	],
	"load_map-greenhouse": [
		{
			"action": "LOAD_MAP",
			"map": "map-greenhouse"
		}
	],
	"load_map-magehouse": [
		{
			"action": "LOAD_MAP",
			"map": "map-magehouse"
		}
	],
	"load_map-lodge": [
		{
			"action": "LOAD_MAP",
			"map": "map-lodge"
		}
	],
	"load_map-family": [
		{
			"action": "LOAD_MAP",
			"map": "map-family"
		}
	],
	"wrap_from-west": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"geometry": "enter_from-east",
			"entity": "%PLAYER%"
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-east",
			"entity": "%PLAYER%",
			"duration": 600
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-main"
		}
	],
	"wrap_from-east": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"geometry": "enter_from-west",
			"entity": "%PLAYER%"
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-west",
			"entity": "%PLAYER%",
			"duration": 600
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-main"
		}
	],
	"enter_from-bobsclub": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-bobsclub",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-oldcouplehouse": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-oldcouplehouse",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-greenhouse": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"geometry": "enter_from-greenhouse",
			"entity": "%PLAYER%"
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-greenhouse",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-magehouse": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-magehouse",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-lodge": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-lodge",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-lodge-cutscene": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-lodge",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-family": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-family",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"enter_from-bakery": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"geometry": "enter_from-bakery",
			"entity": "%PLAYER%",
			"duration": 200
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"show_dialog-hamster-start": [
		{
			"action": "COPY_SCRIPT",
			"script": "face-player"
		},
		{
			"action": "CHECK_ENTITY_GLITCHED",
			"entity": "%SELF%",
			"success_script": "show_dialog-hamster-glitched",
			"expected_bool": true
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "hamster-endstory",
			"expected_bool": true,
			"success_script": "show_dialog-hamster-start-s"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-hamster-start"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "hamster-endstory",
			"bool_value": true
		}
	],
	"show_dialog-hamster-start-s": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-hamster-start-s"
		},
		{
			"action": "PLAY_ENTITY_ANIMATION",
			"entity": "%SELF%",
			"animation": 2,
			"play_count": 2
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "show_dialog-hamster-start"
		}
	],
	"show_dialog-hamster-glitched": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-hamster-glitched"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "show_dialog-hamster-start"
		}
	],
	"show_dialog-marta-start": [
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Marta",
			"target_entity": "%PLAYER%"
		},
		{
			"action": "CHECK_ENTITY_TYPE",
			"entity": "Marta",
			"entity_type": "marta_broom",
			"expected_bool": false,
			"success_script": "show_dialog-marta-cheat"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-marta-start"
		}
	],
	"show_dialog-marta-cheat": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-marta-cheat"
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "Marta",
			"script": "show_dialog-marta-start"
		}
	],
	"fountain-glitchwatch": [
		{
			"action": "CHECK_ENTITY_GLITCHED",
			"entity": "%SELF%",
			"success_script": "fountain_now_unglitched",
			"expected_bool": false
		}
	],
	"fountain_now_unglitched": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "fountain-unglitched",
			"bool_value": true
		},
		{
			"action": "RUN_SCRIPT",
			"script": "null_script"
		}
	],
	"hamster-glitchwatch": [
		{
			"action": "CHECK_ENTITY_GLITCHED",
			"entity": "%SELF%",
			"success_script": "hamster_now_unglitched",
			"expected_bool": false
		}
	],
	"hamster_now_unglitched": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "main_hamster-unglitched",
			"bool_value": true
		},
		{
			"action": "RUN_SCRIPT",
			"script": "null_script"
		}
	],
	"enter_from-credits": [
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 400
		},
		{
			"action": "SCREEN_FADE_IN",
			"duration": 800,
			"color": "#000000"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	]
}