{
	"on_tick-mtn-xa_room": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "saw-bert-secret",
			"expected_bool": true,
			"success_script": "on_tick-mtn-xa_room-watch-only-front-door"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-xa_room-watch-for-xa-too"
		}
	],
	"on_tick-mtn-xa_room-watch-for-xa-too": [
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"expected_bool": true,
			"geometry": "near-xa",
			"success_script": "start-cutscene-bert-secret"
		},
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"expected_bool": true,
			"geometry": "entrance1-hitbox",
			"success_script": "leave-mtn-xa_room"
		},
		{
			"action": "CHECK_FOR_BUTTON_PRESS",
			"button_id": "HAX",
			"success_script": "on_tick-mtn-hax-attempt-check"
		}
	],
	"on_tick-mtn-hax-attempt-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "ch2-hax-restored",
			"expected_bool": false,
			"success_script": "on_tick-mtn-hax-attempt"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-xa_room"
		}
	],
	"start-cutscene-bert-secret": [
		{
			"action": "SET_ENTITY_CURRENT_ANIMATION",
			"entity": "%PLAYER%",
			"byte_value": 0
		},
		{
			"action": "COPY_SCRIPT",
			"script": "cutscene-bert-secret"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-xa_room-watch-only-front-door"
		}
	],
	"on_tick-mtn-xa_room-watch-only-front-door": [
		{
			"action": "CHECK_IF_ENTITY_IS_IN_GEOMETRY",
			"entity": "%PLAYER%",
			"expected_bool": true,
			"geometry": "entrance1-hitbox",
			"success_script": "leave-mtn-xa_room"
		},
		{
			"action": "CHECK_FOR_BUTTON_PRESS",
			"button_id": "HAX",
			"success_script": "on_tick-mtn-hax-attempt-check"
		}
	],
	"leave-mtn-xa_room": [],
	"show_dialog-mtn-door-attempt": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "mtn-serial-toot-done",
			"expected_bool": true,
			"success_script": "show_dialog-mtn-door-serial-reminder"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "mtn-door-attempted",
			"expected_bool": false,
			"success_script": "show_dialog-mtn-door-attempt-first"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "show_dialog-mtn-door-serial-naive"
		}
	],
	"show_dialog-mtn-door-serial-naive": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-door-serial-naive"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "show_dialog-mtn-door-wrapup"
		}
	],
	"show_dialog-mtn-door-attempt-first": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "mtn-hax-attempted",
			"expected_bool": true,
			"success_script": "show_dialog-mtn-door-attempt-second"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-door-attempt-first"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "show_dialog-mtn-door-wrapup"
		}
	],
	"show_dialog-mtn-door-attempt-second": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-door-attempt-second"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "show_dialog-mtn-door-wrapup"
		}
	],
	"show_dialog-mtn-door-serial-reminder": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-door-serial-reminder"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "show_dialog-mtn-door-wrapup"
		}
	],
	"show_dialog-mtn-door-wrapup": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "mtn-door-attempted",
			"bool_value": true
		},
		{
			"action": "SET_ENTITY_INTERACT_SCRIPT",
			"entity": "%SELF%",
			"script": "show_dialog-mtn-door-attempt"
		}
	],
	"on_tick-mtn-hax-attempt": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "mtn-serial-toot-done",
			"expected_bool": true,
			"success_script": "show_dialog-mtn-hax-attempt-reminder"
		},
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "mtn-hax-attempted",
			"expected_bool": false,
			"success_script": "show_dialog-mtn-hax-attempt-first"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-hax-attempt-naive"
		}
	],
	"on_tick-mtn-hax-attempt-naive": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-hax-serial-naive"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-hax-attempt-wrapup"
		}
	],
	"show_dialog-mtn-hax-attempt-first": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "mtn-door-attempted",
			"expected_bool": true,
			"success_script": "on_tick-mtn-hax-attempt-second"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-hax-attempt-first"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-hax-attempt-wrapup"
		}
	],
	"on_tick-mtn-hax-attempt-second": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-hax-attempt-second"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-hax-attempt-wrapup"
		}
	],
	"show_dialog-mtn-hax-attempt-reminder": [
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-hax-attempt-reminder"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_tick-mtn-hax-attempt-wrapup"
		}
	],
	"on_tick-mtn-hax-attempt-wrapup": [
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "mtn-hax-attempted",
			"bool_value": true
		},
		{
			"action": "SET_MAP_TICK_SCRIPT",
			"script": "on_tick-mtn-xa_room"
		}
	],
	"cutscene-bert-secret": [
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Bert",
			"geometry": "bert-spot"
		},
		{
			"action": "SET_ENTITY_DIRECTION",
			"entity": "Bert",
			"direction": "north"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-bertsecret1"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": false
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 100
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "%PLAYER%",
			"target_entity": "Bert"
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 400
		},
		{
			"action": "WALK_ENTITY_ALONG_GEOMETRY",
			"entity": "Bert",
			"geometry": "bert-spot",
			"duration": 1200
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 300
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-bertsecret2"
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Bert",
			"script": "spin_self_clockwise"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-bertsecret3"
		},
		{
			"action": "SET_ENTITY_TICK_SCRIPT",
			"entity": "Bert",
			"script": "null_script"
		},
		{
			"action": "SET_ENTITY_DIRECTION_TARGET_ENTITY",
			"entity": "Bert",
			"target_entity": "%PLAYER%"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-bertsecret4"
		},
		{
			"action": "SET_ENTITY_DIRECTION",
			"entity": "Bert",
			"direction": "south"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-bertsecret5"
		},
		{
			"action": "SET_ENTITY_DIRECTION",
			"entity": "Bert",
			"direction": "east"
		},
		{
			"action": "SHOW_DIALOG",
			"dialog": "dialog-mtn-bertsecret6"
		},
		{
			"action": "SET_SAVE_FLAG",
			"save_flag": "saw-bert-secret",
			"bool_value": true
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 100
		},
		{
			"action": "WALK_ENTITY_TO_GEOMETRY",
			"entity": "Bert",
			"geometry": "entrance1-path",
			"duration": 600
		},
		{
			"action": "NON_BLOCKING_DELAY",
			"duration": 80
		},
		{
			"action": "TELEPORT_ENTITY_TO_GEOMETRY",
			"entity": "Bert",
			"geometry": "hiding-spot"
		},
		{
			"action": "SET_PLAYER_CONTROL",
			"bool_value": true
		}
	],
	"on_load-mtn-xa_room": [
		{
			"action": "TELEPORT_CAMERA_TO_GEOMETRY",
			"geometry": "camera-spot"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-mtn-xa_room-chapter-check"
		}
	],
	"on_load-mtn-xa_room-chapter-check": [
		{
			"action": "COPY_SCRIPT",
			"script": "boot-out-if-necessary"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-mtn-xa_room-hax-check"
		}
	],
	"on_load-mtn-xa_room-hax-check": [
		{
			"action": "CHECK_SAVE_FLAG",
			"save_flag": "can-use-hax-in-mtn",
			"expected_bool": false,
			"success_script": "on_load-mtn-xa_room-disable-hax"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-mtn-xa_room-warp-check"
		}
	],
	"on_load-mtn-xa_room-disable-hax": [
		{
			"action": "COPY_SCRIPT",
			"script": "disable-hax"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-mtn-xa_room-warp-check"
		}
	],
	"on_load-mtn-xa_room-warp-check": [
		{
			"action": "CHECK_WARP_STATE",
			"expected_bool": true,
			"string": "warping",
			"success_script": "on_load-mtn-xa_room-warp-in"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-mtn-xa_room-wrapup"
		}
	],
	"on_load-mtn-xa_room-warp-in": [
		{
			"action": "COPY_SCRIPT",
			"script": "warping-in-fade-in"
		},
		{
			"action": "RUN_SCRIPT",
			"script": "on_load-mtn-xa_room-wrapup"
		}
	],
	"on_load-mtn-xa_room-wrapup": [
		{
			"action": "RUN_SCRIPT",
			"script": "null_script"
		}
	],
	"on_go-mtn-xa_room-to-castle_entrance-check": [
		{
			"action": "RUN_SCRIPT",
			"script": "warp_to-mtn-castle_entrance"
		}
	]
}
